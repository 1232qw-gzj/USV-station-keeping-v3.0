# ============================================================================
# USV Station Keeping System Configuration
# 配置文件 - 所有参数都在这里统一管理
# ============================================================================

# ----------------------------------------------------------------------------
# 任务配置 (Mission Configuration)
# ----------------------------------------------------------------------------
mission:
  # 航点列表 [[北向, 东向], ...]
  waypoints:
    - [0, 0]      # 起点
    - [40, 0]     # 任务点1
    - [40, 30]    # 任务点2
    - [0, 30]     # 任务点3
    - [0, 0]      # 返回起点
  
  # 航点到达判定半径 (m)
  arrival_radius: 5.0
  
  # 每个航点的镇定时长 (秒)
  station_duration: 25.0
  
  # 镇定误差圆半径 (m)
  station_radius: 2.5

# ----------------------------------------------------------------------------
# LOS制导参数 (LOS Guidance Parameters)
# ----------------------------------------------------------------------------
los_guidance:
  # 前视距离 (m)
  delta: 10.0
  
  # 初始LOS角度 (度)
  r_los: 0
  
  # 航向控制增益
  k_psi: 100.0      # 航向误差比例增益
  k_r: 50.0         # 角速度增益

# ----------------------------------------------------------------------------
# 镇定控制参数 (Station Keeping Control Parameters)
# ----------------------------------------------------------------------------
station_keeping:
  # PD控制增益 (位置反馈)
  k_p:
    surge: 80.0      # x方向
    sway: 80.0       # y方向
    yaw: 30.0        # 航向
  
  # PD控制增益 (速度阻尼)
  k_d:
    surge: 40.0      # u方向
    sway: 40.0       # v方向
    yaw: 20.0        # r方向
  
  # 自适应学习率
  gamma:
    surge: 0.15      # x方向
    sway: 0.15       # y方向
    yaw: 0.08        # 航向
  
  # 自适应参数限幅
  theta_max: 100.0

# ----------------------------------------------------------------------------
# 紧急制导参数 (Emergency Guidance Parameters)
# ----------------------------------------------------------------------------
emergency_guidance:
  # 航向控制增益 (增强)
  k_psi: 120.0
  k_r: 60.0
  
  # 推力增强倍数
  thrust_multiplier: 1.2
  
  # 返回镇定区域的距离比例 (相对于station_radius)
  return_distance_ratio: 0.8

# ----------------------------------------------------------------------------
# 环境参数 (Environment Parameters)
# ----------------------------------------------------------------------------
environment:
  # 洋流速度 (m/s)
  current_speed: 0.3
  
  # 洋流方向 (度)
  current_direction: 30

# ----------------------------------------------------------------------------
# 船舶参数 (Vehicle Parameters)
# ----------------------------------------------------------------------------
vehicle:
  # 基础推力 (N)
  tau_x: 120
  
  # 航向控制带宽 (rad/s) - 用于父类
  wn: 1.5
  
  # 控制系统类型
  control_system: "LOS_STATION_KEEPING"

# ----------------------------------------------------------------------------
# 仿真参数 (Simulation Parameters)
# ----------------------------------------------------------------------------
simulation:
  # 总仿真时长 (秒)
  total_time: 300
  
  # 时间步长 (秒)
  dt: 0.02
  
  # 积分方法: "euler" 或 "rk4"
  integration_method: "euler"
  
  # 动画加速倍数 (跳帧数)
  skip_frames: 10

# ----------------------------------------------------------------------------
# 日志配置 (Logging Configuration)
# ----------------------------------------------------------------------------
logging:
  # 日志级别: DEBUG, INFO, WARNING, ERROR
  level: "INFO"
  
  # 是否输出到文件
  to_file: true
  
  # 日志文件名
  filename: "usv_simulation.log"
  
  # 是否同时输出到控制台
  to_console: true
  
  # 控制器调用计数器间隔 (每N次调用打印一次)
  print_interval:
    guidance: 100
    station_keeping: 100
    emergency: 50

# ----------------------------------------------------------------------------
# 输出配置 (Output Configuration)
# ----------------------------------------------------------------------------
output:
  # 是否保存MATLAB数据
  save_matlab: true
  
  # MATLAB文件名
  matlab_filename: "simulation_data.mat"
  
  # 是否保存动画
  save_animation: false
  
  # 动画文件名
  animation_filename: "usv_animation.gif"
  
  # 是否生成报告
  generate_report: true

# ----------------------------------------------------------------------------
# 可视化配置 (Visualization Configuration)
# ----------------------------------------------------------------------------
visualization:
  # 图形窗口大小 (英寸)
  figure_size: [18, 10]
  
  # 船体显示尺寸
  ship_length: 4.0
  ship_width: 1.5
  
  # 航点显示大小
  waypoint_marker_size: 14
  
  # 刷新间隔 (毫秒)
  update_interval: 0.1
